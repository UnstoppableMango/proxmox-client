openapi: 3.0.3
info:
  title: Proxmox VE
  version: '1.0'
  contact:
    name: Erik Rasmussen
  description: OpenAPI reference for the Proxmox VE REST API
servers:
  - url: 'https://localhost:8006/api2/json'
    description: ''
paths:
  /version:
    get:
      summary: API version details
      tags: []
      operationId: get-version
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: GetVersionResponse
                type: object
                properties:
                  release:
                    type: string
                  repoid:
                    type: string
                  version:
                    type: string
      description: API version details. The result also includes the global datacenter confguration.
  /storage:
    get:
      summary: Storage index
      tags: []
      operationId: get-storage
      description: Storage index
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
      parameters:
        - schema:
            type: string
            enum:
              - btrfs
              - cephfs
              - cifs
              - dir
              - glusterfs
              - iscsi
              - iscsidirect
              - lvm
              - lvmthin
              - nfs
              - pbs
              - rbd
              - zfs
              - zfspool
          in: query
          name: type
          description: Only list storage of a specfic type
      security:
        - Authorization: []
    post:
      summary: Create Storage
      tags: []
      operationId: post-storage
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: CreateStorageRequest
                type: object
                properties:
                  storage:
                    type: string
                  type:
                    $ref: '#/components/schemas/StorageType'
                  config:
                    type: object
                required:
                  - storage
                  - type
      description: Create a new storage
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              title: CreateStorageRequest
              type: object
              properties:
                storage:
                  type: string
                  description: The storage identifier
                type:
                  $ref: '#/components/schemas/StorageType'
                authsupported:
                  type: string
                  description: Is auth supported
                base:
                  type: string
                  description: Base volume. This volume is automatically activated
                blocksize:
                  type: string
                  description: Block size
                bwlimit:
                  type: string
                  description: Set bandwidth/io limit for various operations
                comstar_hg:
                  type: string
                  description: Host group for comstar views
                comstart_tg:
                  type: string
                  description: Target group for comstar views
                content:
                  type: string
                  description: |-
                    Allowed content types.
                    NOTE: The value 'rootdir' is used for containers and the value 'images' for VMs
                datastore:
                  type: string
                  description: Proxmox Backup Server datastore name
              required:
                - storage
                - type
  /access/ticket:
    get:
      summary: Get Ticket
      tags: []
      responses:
        '200':
          description: OK
      operationId: get-access-ticket
      description: Dummy. Useful for formatters which want to provide a login page.
    post:
      summary: Create Ticket
      tags: []
      operationId: post-access-ticket
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: CreateTicketResponse
                type: object
                properties:
                  username:
                    type: string
                  CSRFPreventionToken:
                    type: string
                  clustername:
                    type: string
                  ticket:
                    type: string
                required:
                  - username
      description: Create or verify authentication ticket.
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              title: CreateTicketRequest
              type: object
              properties:
                username:
                  type: string
                  description: User name
                password:
                  type: string
                  description: The secret password. This can also be a valid ticket.
                otp:
                  type: string
                  description: One-time password to Two-factor authentication
                path:
                  type: string
                  description: 'Verify ticket, and check if user has ''privs'' on ''path'''
                privs:
                  type: string
                  description: 'Verify ticket, and check if user has ''privs'' on ''path'''
                realm:
                  type: string
                  description: You can optionally pass the realm using this parameter. Normally the realm is simply added to the username '<username>@<realm>'
              required:
                - username
                - password
        description: ''
  '/nodes/{node}/storage/{storage}/download-url':
    parameters:
      - schema:
          type: string
        name: node
        in: path
        required: true
      - schema:
          type: string
        name: storage
        in: path
        required: true
    post:
      summary: Download Url
      tags: []
      operationId: post-download-url
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                content:
                  $ref: '#/components/schemas/ContentType'
                filename:
                  type: string
                url:
                  type: string
                checksum:
                  type: string
                checksum-algorithm:
                  $ref: '#/components/schemas/ChecksumAlgorithm'
                verify-certificates:
                  type: boolean
              required:
                - content
                - filename
                - url
      description: Download templates and ISO images by using an URL
      security:
        - Authorization: []
  '/nodes/{node}/qemu':
    parameters:
      - schema:
          type: string
        name: node
        in: path
        required: true
    get:
      summary: VM Index
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: string
                      enum:
                        - stopped
                        - running
                    vmid:
                      type: integer
                    cpus:
                      type: number
                    lock:
                      type: string
                    maxdisk:
                      type: integer
                    maxmem:
                      type: integer
                    name:
                      type: string
                    pid:
                      type: integer
                    qmpstatus:
                      type: string
                    running-machine:
                      type: string
                    running-qemu:
                      type: string
                    tags:
                      type: string
                    uptime:
                      type: integer
                  required:
                    - status
                    - vmid
      operationId: get-node-qemu
      description: Virtual machine index (per node).
      security:
        - Authorization: []
      parameters:
        - schema:
            type: boolean
          in: query
          name: full
          description: Determine the full status of active VMs
    post:
      summary: Create VM
      tags: []
      operationId: post-node-qemu
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: string
      security:
        - Authorization: []
      parameters: []
      description: Create or restore a virtual machine
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                acpi:
                  type: boolean
                  default: true
                agent:
                  type: string
                  example: '[enaled=]<1|0> [,fstrim_cloned_disks=<1|0>] [,type=<virtio|isa>]'
                arch:
                  type: string
                archive:
                  type: string
                args:
                  type: string
                audio0:
                  type: string
                autostart:
                  type: boolean
                balloon:
                  type: integer
                  minimum: 0
                  description: Amount of target RAM for the VM in MB. Using zero disables the balloon driver.
                bios:
                  type: string
                  enum:
                    - seabios
                    - ovmf
                  default: seabios
                boot:
                  type: string
                bootdisk:
                  type: string
                bwlimit:
                  type: integer
                  minimum: 0
                  description: Overrid I/O bandwitdh limit (in KiB/s).
                cdrom:
                  type: string
                cicustom:
                  type: string
                cipassword:
                  type: string
                citype:
                  type: string
                  enum:
                    - configdrive2
                    - nocloud
                    - opennebula
                  description: 'Specifies the cloud-init configuration format. The default depends on the confiugred operating system type (`ostype`. We use the `nocloud` format for Linux, and `configdrive2` for windows).'
                ciuser:
                  type: string
                cores:
                  type: integer
                  minimum: 1
                  default: 1
                cpu:
                  type: string
                cpulimit:
                  type: number
                  minimum: 0
                  maximum: 128
                  default: 0
                cpuunits:
                  type: integer
                  default: 1024
                  minimum: 2
                  maximum: 262144
                description:
                  type: string
                efidisk0:
                  type: string
                force:
                  type: boolean
                freeze:
                  type: boolean
                hookscript:
                  type: string
                hostpci0:
                  type: string
                hotplug:
                  type: string
                hugepages:
                  type: string
                  enum:
                    - any
                    - '2'
                    - '1024'
                ide0:
                  type: string
                ipconfig0:
                  type: string
                ivshmem:
                  type: string
                keephugepages:
                  type: boolean
                  default: false
                keyboard:
                  type: string
                  enum:
                    - de
                    - de-ch
                    - da
                    - en-gb
                    - en-us
                    - es
                    - fi
                    - fr
                    - fr-be
                    - fr-ca
                    - fr-ch
                    - hu
                    - is
                    - it
                    - ja
                    - lt
                    - mk
                    - nl
                    - 'no'
                    - pl
                    - pt
                    - pt-br
                    - sv
                    - sl
                    - tr
                kvm:
                  type: boolean
                  default: true
                live-restore:
                  type: boolean
                localtime:
                  type: boolean
                lock:
                  type: string
                  enum:
                    - backup
                    - clone
                    - create
                    - migrate
                    - rollback
                    - snapshot
                    - snapshot-delete
                    - suspending
                    - suspended
                machine:
                  type: string
                memory:
                  type: integer
                  minimum: 16
                  default: 512
                  exclusiveMaximum: false
                  description: Amount of RAM for the VM in MB. This is the maximum available memory when you use the balloon device.
                migrate_downtime:
                  type: number
                  default: 0.1
                  minimum: 0
                migrate_speed:
                  type: integer
                  default: 0
                  minimum: 0
                name:
                  type: string
                nameserver:
                  type: string
                net0:
                  type: string
                numa:
                  type: boolean
                  default: false
                numa0:
                  type: string
                onboot:
                  type: boolean
                  default: false
                ostype:
                  type: string
                  enum:
                    - other
                    - wxp
                    - w2k
                    - w2k3
                    - w2k8
                    - wvista
                    - win7
                    - win8
                    - l24
                    - l26
                    - solaris
                parallel0:
                  type: string
                pool:
                  type: string
                protection:
                  type: boolean
                  default: false
                reboot:
                  type: boolean
                  default: true
                rng0:
                  type: string
                sata0:
                  type: string
                sata1:
                  type: string
                sata2:
                  type: string
                scsi0:
                  type: string
                scsi1:
                  type: string
                scsi2:
                  type: string
                scsihw:
                  type: string
                  enum:
                    - lsi
                    - lsi53c810
                    - virtio-scsi-pci
                    - virtio-scsi-single
                    - megasas
                    - pvscsi
                  default: lsi
                searchdomain:
                  type: string
                serial0:
                  type: string
                shares:
                  type: integer
                  minimum: 0
                  maximum: 50000
                  default: 1000
                smbios1:
                  type: string
                smp:
                  type: integer
                  default: 1
                  minimum: 1
                sockets:
                  type: integer
                  default: 1
                  minimum: 1
                spice_enhancements:
                  type: string
                sshkeys:
                  type: string
                start:
                  type: boolean
                  default: false
                startdate:
                  type: string
                  default: now
                startup:
                  type: string
                storage:
                  type: string
                tablet:
                  type: boolean
                  default: true
                tags:
                  type: string
                tdf:
                  type: boolean
                  default: false
                template:
                  type: boolean
                  default: false
                unique:
                  type: boolean
                unused0:
                  type: string
                usb0:
                  type: string
                usb1:
                  type: string
                usb2:
                  type: string
                usb3:
                  type: string
                usb4:
                  type: string
                vcpus:
                  type: integer
                  default: 0
                  minimum: 0
                vga:
                  type: string
                virtio0:
                  type: string
                virtio1:
                  type: string
                virtio2:
                  type: string
                vmgenid:
                  type: string
                vmstatestorage:
                  type: string
                watchdog:
                  type: string
  '/nodes/{node}/storage/{storage}/content/{volume}':
    parameters:
      - schema:
          type: string
        name: node
        in: path
        required: true
      - schema:
          type: string
        name: storage
        in: path
        required: true
      - schema:
          type: string
        name: volume
        in: path
        required: true
    get:
      summary: Get volume attributes
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  format:
                    type: string
                  path:
                    type: string
                  size:
                    type: integer
                  used:
                    type: integer
                  notes:
                    type: string
                required:
                  - format
                  - path
                  - size
                  - used
      operationId: get-volume-attributes
      description: Get volume attributes
      parameters: []
    put:
      summary: Update volume attributes
      tags: []
      operationId: put-volume-attributes
      responses:
        '200':
          description: OK
      description: Update volume attributes
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                notes:
                  type: string
    delete:
      summary: Delete volume
      tags: []
      operationId: delete-volume
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: string
      description: Delete a volume
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                delay:
                  type: integer
                  minimum: 1
                  maximum: 30
components:
  schemas:
    StorageType:
      type: string
      title: StorageType
      description: Storage type
      enum:
        - btrfs
        - cephfs
        - cifs
        - dir
        - glusterfs
        - iscsi
        - iscsidirect
        - lvm
        - lvmthin
        - nfs
        - pbs
        - rbd
        - zfs
        - zfspool
    ContentType:
      type: string
      title: ContentType
      enum:
        - iso
        - vztmpl
    ChecksumAlgorithm:
      type: string
      title: ChecksumAlgorithm
      enum:
        - md5
        - sha1
        - sha224
        - sha256
        - sha384
        - sha512
  responses: {}
  requestBodies: {}
  securitySchemes:
    Authorization:
      name: API Key
      type: apiKey
      in: header
      description: Has the form PVEAPIToken=USER@REALM!TOKENID=UUID
